<div class="container mx-auto px-4 py-16 max-w-4xl">
  @if (order()) {
    <div class="text-center">
      <!-- Ícono de éxito -->
      <div
        class="inline-flex items-center justify-center w-24 h-24 rounded-full bg-green-100 mb-6"
      >
        <i class="pi pi-check-circle text-6xl text-green-500"></i>
      </div>

      <h1 class="text-3xl font-bold mb-4 text-gray-800">
        ¡Orden Confirmada!
      </h1>
      <p class="text-xl text-gray-600 mb-2">
        Tu orden
        <strong class="text-blue-600">{{ order()!.orderNumber }}</strong> fue
        procesada exitosamente.
      </p>
      <p class="text-gray-600 mb-8">
        Te enviamos un email de confirmación a
        <strong>{{ order()!.shippingAddress.email }}</strong> con los detalles
        de tu pedido.
      </p>

      <!-- Card con detalles de la orden -->
      <p-card styleClass="text-left max-w-2xl mx-auto mb-8">
        <h2 class="text-lg font-bold mb-4">Detalles de tu Pedido</h2>

        <!-- Items -->
        <div class="space-y-3 mb-4">
          @for (item of order()!.items; track $index) {
            <div
              class="flex justify-between items-center p-3 bg-gray-50 rounded"
            >
              <div class="flex-1">
                <p class="font-semibold">{{ item.productName }}</p>
                <p class="text-sm text-gray-600">
                  {{ formatSize(item.variantSize) }} •
                  {{ formatColor(item.variantColor) }} • Cantidad:
                  {{ item.quantity }}
                </p>
              </div>
              <p class="font-semibold">
                ${{ item.subtotal | number: '1.2-2' }}
              </p>
            </div>
          }
        </div>

        <p-divider />

        <!-- Totales -->
        <div class="space-y-2 mb-4">
          <div class="flex justify-between text-gray-700">
            <span>Subtotal</span>
            <span>${{ order()!.subtotal | number: '1.2-2' }}</span>
          </div>
          <div class="flex justify-between text-gray-700">
            <span>Envío</span>
            <span>${{ order()!.shippingCost | number: '1.2-2' }}</span>
          </div>
          <div class="flex justify-between font-bold text-lg">
            <span>Total</span>
            <span class="text-blue-600"
              >${{ order()!.total | number: '1.2-2' }}</span
            >
          </div>
        </div>

        <p-divider />

        <!-- Dirección de envío -->
        <div class="mt-4">
          <h3 class="font-semibold mb-2">Dirección de Envío</h3>
          <p class="text-sm text-gray-700">
            {{ order()!.shippingAddress.fullName }}
          </p>
          <p class="text-sm text-gray-700">
            {{ order()!.shippingAddress.street }}
          </p>
          <p class="text-sm text-gray-700">
            {{ order()!.shippingAddress.city }},
            {{ order()!.shippingAddress.state }}
            ({{ order()!.shippingAddress.zipCode }})
          </p>
          <p class="text-sm text-gray-700">
            {{ order()!.shippingAddress.phone }}
          </p>
        </div>

        <!-- Método de pago -->
        <div class="mt-4">
          <h3 class="font-semibold mb-2">Método de Pago</h3>
          <p class="text-sm text-gray-700">
            {{ getPaymentMethodLabel(order()!.paymentMethod) }}
          </p>
        </div>
      </p-card>

      <!-- Información adicional para invitados -->
      <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
        <p class="text-sm text-blue-800">
          <i class="pi pi-info-circle mr-2"></i>
          Te notificaremos por email cuando tu pedido esté en camino.
        </p>
      </div>

      <!-- Incentivo para crear cuenta -->
      <div class="bg-purple-50 border border-purple-200 rounded-lg p-4 mb-8">
        <p class="text-sm text-purple-800 mb-2">
          <i class="pi pi-star mr-2"></i>
          <strong>¿Quieres ver tus órdenes y obtener beneficios exclusivos?</strong>
        </p>
        <p class="text-sm text-purple-700">
          Crea una cuenta y accede a tu historial de compras, descuentos especiales y más.
        </p>
      </div>

      <!-- Botones de acción -->
      <div class="flex flex-col sm:flex-row justify-center gap-4">
        <p-button
          label="Crear Cuenta"
          icon="pi pi-user-plus"
          severity="secondary"
          [outlined]="true"
          (onClick)="goToLogin()"
          size="large"
        />
        <p-button
          label="Continuar Comprando"
          icon="pi pi-shopping-bag"
          (onClick)="continueShopping()"
          size="large"
        />
      </div>
    </div>
  } @else {
    <!-- Si no hay orden, mostrar mensaje -->
    <div class="text-center py-16">
      <p class="text-xl text-gray-600 mb-4">
        No se encontró la información de la orden.
      </p>
      <p-button
        label="Volver a la Tienda"
        icon="pi pi-shopping-bag"
        (onClick)="continueShopping()"
      />
    </div>
  }
</div>

